<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anek+Telugu:wght@500&family=Gidugu&display=swap"
        rel="stylesheet">
    <title>GOLD RATES</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="someshwara.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Anek+Telugu:wght@500&family=Gidugu&family=Sree+Krushnadevaraya&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Gidugu&family=NTR&family=Ramabhadra&family=Sree+Krushnadevaraya&display=swap"
        rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
</head>

<body>
   <div class="titlediv"> <p class="note">ఈ క్రింద ఉన్న అన్ని పూరించి, తదుపరి submit ని నొక్కండి. <br>
    తరవాత download button నొక్కండి. <br>
    Download అయ్యాక, మీ WhatsApp లో status పెట్టుకొగలరు!</p></div>
    <div class="snam">
        <h3 id="enter-prices" style="color: rgb(4, 34, 140);">మీ Shop వివరాలు ENTER చెయ్యండి</h3>
        <label for="shop-name">Shop పేరు : </label>
        <input type="text" name="shop-name" id="shop-name" maxlength="30"> <br>
        <label for="shop-number">Cell Number : </label>
        <input type="tel" name="shop-number" id="shop-number" maxlength="10"> <br>
        <label for="shop-owner">మీ పేరు : </label>
        <input type="text" name="shop-owner" id="shop-owner" maxlength="30"> <br>
        <label for="shop-address">Shop address : </label>
        <input type="text" name="shop-address" id="shop-address" maxlength="40"> <br>
    </div>
    <h3 id="enter-prices" style="color: rgb(4, 34, 140);">ఈరోజు ధరలు ENTER చెయ్యండి</h3>
    <form id="price-form">
        <label for="gold-old">బంగారం పాత తులం :</label>
        <input type="text" id="gold-old" name="gold-old"><br>
        <label for="gold-new">బంగారం కొత్త తులం :</label>
        <input type="text" id="gold-new" name="gold-new"><br>
        <label for="silver-old">వెండి పాత తులం :</label>
        <input type="text" id="silver-old" name="silver-old"><br>
        <label for="silver-new">వెండి కొత్త తులం :</label>
        <input type="text" id="silver-new" name="silver-new"><br>
        <input type="submit" id="submit" value="Submit">
    </form>
    <br><br>
    <div id="output" style="display: none;">
        <div class="container" id="myDiv">
            <i class="fa-solid fa-om om-icon c1"></i>
            <i class="fa-solid fa-om om-icon c2"></i>
            <div class="title"><span id="sn"></span><br>
            </div>
            <div class="cell-number"><span id="sp"></span> </div>
            <div class="date-time">
                సమయం:<p id="time"></p>
                 తేది:<p id="date"></p>
            </div>
            <table class="table">
                <tr>
                    <td></td>
                    <td class="hd">
                        పాత తులం
                        11.664 grams
                    </td>
                    <td class="hd">కొత్త తులం
                        10.000 grams</td>
                </tr>
                <tr>
                    <td class="hd">బంగారం ధర
                    </td>
                    <td>
                        <p id="gold-old-value"></p>
                    </td>
                    <td>
                        <p id="gold-new-value"></p>
                    </td>
                </tr>
                <tr>
                    <td class="hd">వెండి ధర</td>
                    <td>
                        <p id="silver-old-value"></p>
                    </td>
                    <td>
                        <p id="silver-new-value"></p>
                    </td>
                </tr>
            </table>


            <div class="name"><span id="so"></span></div>
            <div class="address"><span id="sa"></span></div>
            <div class="horizontal-line"></div>
            <div class="tagline">గమనిక: ధరలు ఎప్పటికప్పుడు మారుతున్నాయి కనుక గమనించగలరు <br>
            </div>
            <p class="footer" style="font-size: 7px; letter-spacing: 1px; font-weight: 600;">coded by pavan kumar</p>
        </div><br>
        <button id="downloadButton">Download Image</button>
    </div>




    <script>
        const submitButton = document.getElementById('submit');

        submitButton.addEventListener('click', function () {
            // Get the input values
            const inputValue1 = document.getElementById('shop-name').value;
            const inputValue3 = document.getElementById('shop-owner').value;
            const inputValue4 = document.getElementById('shop-address').value;

            // Calculate input lengths
            const inputLength1 = inputValue1.length;
            const inputLength3 = inputValue3.length;
            const inputLength4 = inputValue4.length;
            //console.log(inputLength3)

            // Update font sizes based on input lengths
            if (inputLength1 <= 22) {
                document.getElementById('sn').style.fontSize = '20px';
            } else if (inputLength1 <= 26) {
                document.getElementById('sn').style.fontSize = '14px';
            } else if (inputLength1 <= 30) {
                document.getElementById('sn').style.fontSize = '12px';
            }

            if (inputLength3 <= 22) {
                document.getElementById('so').style.fontSize = '13px';
            } else if (inputLength3 < 26) {
                document.getElementById('so').style.fontSize = '12px';
            } else if (inputLength3 <= 30) {
                document.getElementById('so').style.fontSize = '10px';
            }

            if (inputLength4 <= 28) {
                document.getElementById('sa').style.fontSize = '15px';
            } else if (inputLength4 < 35) {
                document.getElementById('sa').style.fontSize = '14px';
            } else if (inputLength4 >= 35) {
                document.getElementById('sa').style.fontSize = '11px';
            }
        });

        document.getElementById("price-form").addEventListener("submit", function (event) {
            event.preventDefault();
            var goldOld = document.getElementById("gold-old").value;
            var goldNew = document.getElementById("gold-new").value;
            var silverOld = document.getElementById("silver-old").value;
            var silverNew = document.getElementById("silver-new").value;
            
            var shopname = document.getElementById("shop-name").value;
            var shopnumber = document.getElementById("shop-number").value;
            var shopowner = document.getElementById("shop-owner").value;
            var shopaddress = document.getElementById("shop-address").value;
            var pavan = document.querySelector("#time");
            var kumar = document.querySelector("#date");

            if (
        goldOld === "" ||
        goldNew === "" ||
        silverOld === "" ||
        silverNew === "" ||
        shopname === "" ||
        shopnumber === "" ||
        shopowner === "" ||
        shopaddress === ""
    ) {
        alert("దయచేసి సమర్పించే ముందు అన్నీ తప్పనిసరిగా పూరించండి");
        return;
    }


            document.getElementById("gold-old-value").textContent = goldOld;
            document.getElementById("gold-new-value").textContent = goldNew;
            document.getElementById("silver-old-value").textContent = silverOld;
            document.getElementById("silver-new-value").textContent = silverNew;

            document.getElementById("sn").textContent = shopname.toUpperCase();;
            document.getElementById("sp").textContent = "Cell : " + shopnumber;
            document.getElementById("so").textContent = shopowner.toUpperCase();;
            document.getElementById("sa").textContent = shopaddress;




            var currentDate = new Date();

            var formattedDate = ('0' + currentDate.getDate()).slice(-2) + '-' +
                ('0' + (currentDate.getMonth() + 1)).slice(-2) + '-' +
                currentDate.getFullYear();

            var currentHours = currentDate.getHours() % 12 || 12;
            var formattedTime = currentHours + ':' + ('0' + currentDate.getMinutes()).slice(-2) +
                ' ' + (currentDate.getHours() >= 12 ? 'PM' : 'AM');
            document.getElementById("time").textContent = formattedTime;
            document.getElementById("date").textContent = formattedDate;
            var outputContainer = document.getElementById("output");
            outputContainer.style.display = "block";
            if (currentHours > 9) {
                pavan.style.fontSize = "8px";
                pavan.style.top = "80px";
                pavan.style.fontSize = "8px";
                pavan.style.top = "80px";
            }
        });
    
    
        document.getElementById("downloadButton").addEventListener("click", function () {
    // Select the div to be captured
    const divToCapture = document.getElementById("myDiv");

    // Use HTML2Canvas to capture the div as an image
    html2canvas(divToCapture).then(function (canvas) {
        // Create a temporary link element to trigger the download
        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/png");
        link.download = "screenshot.png";

        // Trigger the download
        link.click();
    });
});

    
    
    </script>

</body>

</html>
